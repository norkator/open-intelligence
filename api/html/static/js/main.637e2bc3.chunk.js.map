{"version":3,"sources":["pages/Home/FaceIdentity/FaceIdentity.module.css","pages/Plates/Cars/Cars.module.css","pages/Navbar/Navbar.tsx","store/actions/auth.ts","store/actionTypes.ts","axios.ts","components/LoadingIndicator/LoadingIndicator.tsx","pages/Cameras/Cameras.tsx","utils/HttpUtils.ts","pages/Home/Instances/Instances.tsx","components/GenericImageModal/GenericImageModal.tsx","components/ActivityModal/ActivityModal.tsx","pages/Home/Labels/Labels.tsx","pages/Home/DateSelector/DateSelector.tsx","pages/Home/DateRangeSelector/DateRangeSelector.tsx","pages/Home/Calendar/Calendar.tsx","pages/Home/FaceIdentity/FaceIdentity.tsx","pages/Home/Home.tsx","pages/Faces/Faces.tsx","utils/DateUtils.ts","components/PlateEditModal/PlateEditModal.tsx","utils/TextUtils.ts","pages/Plates/Cars/Cars.tsx","pages/Plates/Owners/Owners.tsx","pages/Plates/Plates.tsx","pages/Training/PlateTraining/PlateTraining.tsx","pages/Training/PersonTraining/PersonTraining.tsx","pages/Training/Training.tsx","App.tsx","serviceWorker.ts","store/reducers/dateReducer.ts","store/reducers/authReducer.ts","index.tsx","pages/Navbar/Navbar.module.css","pages/Cameras/Cameras.module.css","components/LoadingIndicator/LoadingIndicator.module.css"],"names":["module","exports","NavBar","state","activeLink","setActiveLinkHandler","link","setState","setCurrentPath","split","window","location","href","length","console","log","e","error","this","navBarLinksClasses","styles","Link","Navbar","bg","variant","expand","Brand","className","NavbarBrand","alt","src","width","height","Toggle","aria-controls","Collapse","id","join","to","onClick","Component","logout","localStorage","removeItem","type","authCheckState","dispatch","expirationTime","token","getItem","expirationDate","Date","userId","idToken","authSuccess","Number","getTime","setTimeout","instance","axios","create","basePath","process","MANAGE_LICENSE_PLATES","GET_FACES","LoadingIndicator","props","style","Spinner","animation","isDark","SpinnerDiv","Cameras","_isMounted","windowWidth","innerWidth","imageData","intervalId","isLoading","loadCameraImages","post","then","data","images","catch","handleResize","addEventListener","setInterval","clearInterval","removeEventListener","cameraImages","key","undefined","map","image","title","name","file_create_date","toDateString","file_name","getObjectDetectionImageFileNameForCroppedImageName","croppedImageName","a","fileData","response","getObjectDetectionImage","objectDetectionImageFileName","getIntelligence","selectedDate","loadLabelImages","label","getSuperResolutionImage","imageFile","getInstanceDetails","get","getCalendarEvents","dateRangeStartDate","dateRangeEndDate","events","getLicensePlates","plates","addLicensePlate","licencePlate","ownerName","dataId","licence_plate","owner_name","data_id","removeLicensePlate","delete","updateLicensePlate","put","getLicensePlateDetections","resultOption","startDate","endDate","selectedDateStart","selectedDateEnd","licensePlates","getFaceGroupingImages","faceGroupingData","names","moveFaceGroupingImage","rectFileName","trainFaceModelAction","getFaces","faces","tryFaceDetectionAgain","Instances","instances","loadInstanceDetails","process_name","updatedAt","createdAt","Card","text","Header","Body","padding","Table","striped","bordered","hover","minWidth","GenericImageModal","Modal","size","show","onHide","closeHandler","closeButton","Title","description","showBadges","srImage","detectionResult","color","additionalInfo","Footer","Button","ActivityModal","chartData","labels","forEach","cd","push","h","lineChartSpec","datasets","fill","lineTension","backgroundColor","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","pointBorderColor","pointBackgroundColor","pointBorderWidth","pointHoverRadius","pointHoverBackgroundColor","pointHoverBorderColor","pointHoverBorderWidth","pointRadius","pointHitRadius","clickHoldTimer","longClickHandled","Labels","labelSelection","instanceCount","storageUse","labelDonutData","labelImages","genericImageModalData","activityModal","activityChartData","onDonutElementClickHandler","element","index","_index","labelSelected","loadLabelImagesHandler","genericImageModalCloseHandler","activityModalCloseHandler","handleLabelMouseDown","file","labelImageClickHandler","handleLabelMouseUp","clearTimeout","showActivityModalHandler","prevProps","prevState","snapshot","loadIntelligence","date","result","dataSet","hoverBackgroundColor","donut","value","performance","activity","loadObjectDetectionImage","loadObjectDetectionImageHandler","loadSuperResolutionImage","onMouseDown","onMouseUp","maxHeight","maxWidth","Badge","onElementsClick","options","maintainAspectRatio","connect","dateReducer","DateSelector","placeholder","aria-label","onChange","event","onDateSelected","onDecrementDay","onIncrementDay","days","calendar","DateRangeSelector","onDateRangeStartDateSelected","onDateRangeEndDateSelected","Calendar","calendarWeekends","calendarEvents","calendarComponentRef","React","createRef","handleDateClick","arg","handleEventClick","clickInfo","extendedProps","file_name_cropped","loadCalendarEvents","plugins","dayGridPlugin","timeGridPlugin","interactionPlugin","ref","weekends","dateClick","eventClick","headerToolbar","left","center","right","initialView","FaceIdentity","faceDetections","face","zoom","cursor","onFaceClickHandler","Img","confirm","alert","Home","Faces","selectedDay","toISOString","substr","faceImages","loadEarlierDayHandler","setDate","getDate","dateStr","setSelectedDay","loadNextDayHandler","loadFaceImages","removeDuplicates","filter","v","i","findIndex","t","disabled","getNowISODate","ChangeDate","PlateEditModal","htmlFor","defaultValue","lpOnChange","target","ownerOnChange","saveHandler","filterLicensePlate","licensePlate","replace","Cars","today","totalPlates","licensePlateDetections","plateEditModalData","plateEditModalCloseHandler","plateEditModalSaveHandler","plateObject","finally","detection","String","addNewPlateHandler","lpDetection","loadLicensePlateDetections","cars","lp","owner","Owners","filteredLicensePlates","onSearchFilterChangeHandler","toLowerCase","array","slice","f","includes","editPlateHandler","plate","loadLicensePlates","plateRemoveHandler","owners","Row","Col","Plates","PlateTraining","open","PersonTraining","faceGroupingNames","faceGroupingImages","loadedFile","showNames","faceGroupingFaceImageClickHandler","loadMoreHandler","loadFaceGroupingImages","deleteAllVisibleHandler","moveFaceGroupingImageHandler","md","trainModelHandler","Training","App","classes","content","isAuthenticated","paddingBottom","exact","path","component","authReducer","onTryAutoSignup","auth","Boolean","hostname","match","nowIsoDate","initialState","action","loading","authRedirectPath","authStart","updateObject","authFail","authLogout","setAuthRedirectPath","oldObject","updatedProperties","reducer","rootReducer","combineReducers","store","createStore","composeWithDevTools","applyMiddleware","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.637e2bc3.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"zoom\":\"FaceIdentity_zoom__1DJSV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"zoom\":\"Cars_zoom__2vehQ\"};","import React, {Component} from \"react\";\nimport {Navbar} from 'react-bootstrap'\nimport styles from './Navbar.module.css'\nimport {Link} from \"react-router-dom\";\n\nclass NavBar extends Component<any, any> {\n  state = {\n    activeLink: '/'\n  };\n\n  setActiveLinkHandler = (link: string) => {\n    this.setState({activeLink: link});\n  };\n\n  componentDidMount(): void {\n    this.setCurrentPath();\n  }\n\n  setCurrentPath = () => {\n    try {\n      // Todo: find other way, this is horrible\n      const split = window.location.href.split('/');\n      const activeLink = '/' + split[split.length - 1];\n      console.log(activeLink);\n      this.setState({activeLink: activeLink});\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  render() {\n    const navBarImg = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAACHklEQVR4Ae3WAWTjUBjA8UNRFMVQFMUwHIahCI7hMBTFUBTDYQiG4RAUBRSHAIaiKIrhAFAURVAURREERVAMRe+PfTzP+faSJsy2Pz9M0rcvSdPk26foq+PxeIkBZlhi+2qOKR5xXvYQVfiI4doa/TKG6WCDvEXwihpmALsdntBFG61XHnqYYA+zA+5OGaSCKcwS3KPieIkDpDAb5h1oCLNn1HOs08QCZndZF7mF2QiVE2+IqXX5vCwfTiDNCrxLF5Ai1w8GkLaoFXi3NpFC6r99FMoH+PsBEUK0lHW+Y4IF+soBr98a6BrSxtrWhlmorPMX0gFN66D3kM61gUJIQ2ubD7OVsk4Ks661fQLpURtoCcmztjVwgPSgrPMH0g5Va3sP0lQbKIYkp9keykfb4Qv8E79Q/882D9JcW4SISn5QtyBt38NATUixtmMCqVHiQG1IC23HCNJViQN1Ic20HZ8gBcoPWtZ6+v/RX8SkyNpWR4ysLezXGuwgXWoD1fAC6ca+XbGHawkurDXuIcUu13cEaYWK/YLveKbWaNlnGQkk32WgOlJIofLCn8Auxm9U7UuFZ0gb/R1Lf275yr5n8PADFw5nXupkvTXHMAv1I1K/lzOYBXnf8OYwW+Emwxp9bGE2OfW1cwy7CAGu0LAeCR6G2MBuUNQvq48UeUtwW/TP/RlGeIFrKQJUy3xS19DBGBF2kGIsEeJaBvnqQ/cPDxGlXpRi3oIAAAAASUVORK5CYII=\";\n    const navBarLinksClasses = ['nav-link', styles.Link];\n\n    return (\n      <>\n        <Navbar bg=\"dark\" variant=\"dark\" expand=\"lg\">\n          <Navbar.Brand className={styles.NavbarBrand}>\n            <img\n              alt=\"Open-Intelligence Logo\"\n              src={navBarImg}\n              width=\"36\"\n              height=\"36\"\n              className=\"d-inline-block align-top\"\n            />{' '}\n            <span className={styles.NavbarBrand}>Open-Intelligence</span>\n          </Navbar.Brand>\n          <Navbar.Toggle aria-controls=\"navbarSupportedContent\"/>\n          <Navbar.Collapse id=\"navbarSupportedContent\">\n            {\n              this.state.activeLink !== '/' ?\n                <Link className={navBarLinksClasses.join(' ')} to=\"/\"\n                      onClick={() => this.setActiveLinkHandler('/')}>Home</Link>\n                : <span>Home</span>\n            }\n            {\n              this.state.activeLink !== '/cameras' ?\n                <Link className={navBarLinksClasses.join(' ')} to=\"/cameras\"\n                      onClick={() => this.setActiveLinkHandler('/cameras')}>Cameras</Link>\n                : <span>Cameras</span>\n            }\n            {\n              this.state.activeLink !== '/plates' ?\n                <Link className={navBarLinksClasses.join(' ')} to=\"/plates\"\n                      onClick={() => this.setActiveLinkHandler('/plates')}>Plates</Link>\n                : <span>Plates</span>\n            }\n            {\n              this.state.activeLink !== '/faces' ?\n                <Link className={navBarLinksClasses.join(' ')} to=\"/faces\"\n                      onClick={() => this.setActiveLinkHandler('/faces')}>Faces</Link>\n                : <span>Faces</span>\n            }\n            {\n              this.state.activeLink !== '/training' ?\n                <Link className={navBarLinksClasses.join(' ')} to=\"/training\"\n                      onClick={() => this.setActiveLinkHandler('/training')}>Training</Link>\n                : <span>Training</span>\n            }\n          </Navbar.Collapse>\n        </Navbar>\n      </>\n    )\n  }\n}\n\n\nexport default NavBar;\n","import {AUTH_LOGOUT, AUTH_SUCCESS} from \"../actionTypes\";\n\nexport const logout = () => {\n  localStorage.removeItem('token');\n  localStorage.removeItem('expirationDate');\n  localStorage.removeItem('userId');\n  return {\n    type: AUTH_LOGOUT\n  };\n};\n\nexport const authSuccess = (token: string, userId: number) => {\n  return {\n    type: AUTH_SUCCESS,\n    idToken: token,\n    userId: userId\n  };\n};\n\nexport const checkAuthTimeout = (expirationTime: number) => {\n  return (dispatch: any) => {\n    setTimeout(() => {\n      dispatch(logout());\n    }, expirationTime * 1000);\n  };\n};\n\nexport const authCheckState = () => {\n  return (dispatch: any) => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      dispatch(logout());\n    } else {\n      // @ts-ignore\n      const expirationDate = new Date(localStorage.getItem('expirationDate'));\n      if (expirationDate <= new Date()) {\n        dispatch(logout());\n      } else {\n        const userId = Number(localStorage.getItem('userId')) | 0;\n        dispatch(authSuccess(token, userId));\n        dispatch(checkAuthTimeout((expirationDate.getTime() - new Date().getTime()) / 1000));\n      }\n    }\n  };\n};\n","// Date related actions across ui\nexport const SET_SELECTED_DATE = 'SET_SELECTED_DATE';\nexport const INCREMENT_DAY = 'INCREMENT_DAY';\nexport const DECREMENT_DAY = 'DECREMENT_DAY';\nexport const CALENDAR_SELECTION = 'CALENDAR_SELECTION';\nexport const DATE_RANGE_START_DATE_SELECTED = 'DATE_RANGE_START_DATE_SELECTED';\nexport const DATE_RANGE_END_DATE_SELECTED = 'DATE_RANGE_END_DATE_SELECTED';\n\n// Authentication actions\nexport const AUTH_START = 'AUTH_START';\nexport const AUTH_SUCCESS = 'AUTH_SUCCESS';\nexport const AUTH_FAIL = 'AUTH_FAIL';\nexport const AUTH_LOGOUT = 'AUTH_LOGOUT';\nexport const SET_AUTH_REDIRECT_PATH = 'SET_AUTH_REDIRECT_PATH';\n","import axios from 'axios';\n\nconst instance = axios.create({\n  /* Something for future use */\n});\n\n// instance.defaults.headers.common['Someheader'] = 'somevalue';\n\nexport default instance;\n\n// .env file in root can override default base path taken from window location href\nconst basePath: string = process.env.REACT_APP_API_BASE_URL !== undefined ?\n  process.env.REACT_APP_API_BASE_URL : document.location.href;\n\nexport const GET_LATEST_CAMERA_IMAGES_PATH: string = basePath + \"get/latest/camera/images\";\nexport const GET_FACES_FOR_DAY_PATH: string = basePath + \"get/faces/for/day\";\nexport const GET_GET_OBJ_IMG_NAME_FROM_CROPPED_IMG: string = basePath + \"get/object/detection/image/for/cropped/image\";\nexport const GET_OBJECT_DETECTION_IMAGE: string = basePath + \"get/object/detection/image\";\nexport const GET_INTELLIGENCE: string = basePath + \"get/intelligence\";\nexport const GET_LABEL_IMAGES: string = basePath + \"get/label/images\";\nexport const GET_SUPER_RESOLUTION_IMAGE: string = basePath + \"get/super/resolution/image\";\nexport const GET_INSTANCE_DETAILS: string = basePath + \"get/instance/details\";\nexport const GET_CALENDAR_EVENTS: string = basePath + \"get/calendar/events\";\nexport const GET_LICENSE_PLATES: string = basePath + \"get/licence/plates\";\nexport const MANAGE_LICENSE_PLATES: string = basePath + \"manage/licence/plates\";\nexport const GET_LICENSE_PLATE_DETECTIONS: string = basePath + \"get/license/plate/detections\";\nexport const GET_FACE_GROUPING_IMAGES: string = basePath + \"get/face/grouping/images\";\nexport const MOVE_FACE_GROUPING_IMAGE: string = basePath + \"move/face/grouping/image\";\nexport const TRAIN_FACE_MODEL_ACTION: string = basePath + \"train/face/model\";\nexport const GET_FACES: string = basePath + \"get/faces\";\nexport const TRY_FACE_DETECTION_AGAIN: string = basePath + \"try/face/detection/again\";\n","import {Spinner} from \"react-bootstrap\";\nimport styles from \"./LoadingIndicator.module.css\";\nimport React from \"react\";\n\n/**\n * Centered loading indicator\n * @constructor\n */\nexport const LoadingIndicator = (props: any) => {\n  return (\n    <div className=\"d-flex justify-content-center\">\n      <div style={{width: '64px', height: '64px'}} className=\"text-center\">\n        <Spinner\n          style={{width: '32px', height: '32px'}}\n          animation=\"grow\"\n          variant={props.isDark ? 'dark' : 'light'}\n          className={styles.SpinnerDiv}\n        />\n      </div>\n    </div>\n  );\n};\n","import React, {Component} from \"react\";\nimport axios, {GET_LATEST_CAMERA_IMAGES_PATH} from '../../axios';\nimport {LoadingIndicator} from \"../../components/LoadingIndicator/LoadingIndicator\";\n\ninterface ImageDataInterface {\n  id: string,\n  name: string,\n  image: string, // this contains image data, long base64 string\n  file_name: string,\n  file_create_date: string\n}\n\nclass Cameras extends Component {\n  private _isMounted: boolean;\n\n  state = {\n    windowWidth: window.innerWidth,\n    imageData: [] as ImageDataInterface[],\n    intervalId: 0,\n    isLoading: true,\n  };\n\n  constructor(props: any) {\n    super(props);\n    this._isMounted = false;\n  }\n\n  componentDidMount(): void {\n    this._isMounted = true;\n    window.addEventListener(\"resize\", this.handleResize);\n    this.loadCameraImages();\n    const intervalId = setInterval(() => this.loadCameraImages(), 60 * 1000);\n    this.setState({intervalId: intervalId});\n  }\n\n  loadCameraImages = () => {\n    axios.post(GET_LATEST_CAMERA_IMAGES_PATH).then((data: any) => {\n      if (this._isMounted) {\n        this.setState({imageData: data.data.images, isLoading: false});\n      }\n    }).catch(error => {\n      console.error(error);\n    });\n  };\n\n  componentWillUnmount(): void {\n    clearInterval(this.state.intervalId);\n    this._isMounted = false;\n    window.removeEventListener(\"resize\", this.handleResize);\n  }\n\n  handleResize = () => {\n    this.setState({windowWidth: window.innerWidth});\n  };\n\n  render() {\n    const cameraFlexStyle = [\"d-flex\", \"justify-content-center\", \"flex-wrap\"];\n    let cameraImages: JSX.Element[] = [<div key=\"null\"/>]; // JSX.Element[] = [<span className={cameraFlexStyle.join(' ')}>No camera images available</span>];\n\n    const width = this.state.windowWidth / 2;\n    const height = width * 50 / 100;\n\n    if (this.state.imageData !== undefined) {\n      if (this.state.imageData.length > 0) {\n        cameraImages = this.state.imageData.map(image => {\n          return (\n            <img\n              id={image.id}\n              title={image.name + ' ' + new Date(image.file_create_date).toDateString()}\n              className=\"CursorPointer magictime vanishIn\"\n              style={{width: width, height: height}}\n              key={image.id}\n              src={image.image}\n              alt={image.file_name}/>\n          )\n        });\n      }\n    }\n\n    return (\n      <div>\n        <div className={cameraFlexStyle.join(' ')}>\n          {cameraImages}\n        </div>\n        { /* Handle showing loading indicator */\n          this.state.isLoading ? <LoadingIndicator/> : null\n        }\n      </div>\n    )\n  }\n}\n\n\nexport default Cameras;\n","import axios, {\n  GET_GET_OBJ_IMG_NAME_FROM_CROPPED_IMG,\n  GET_OBJECT_DETECTION_IMAGE,\n  GET_INTELLIGENCE,\n  GET_LABEL_IMAGES,\n  GET_SUPER_RESOLUTION_IMAGE,\n  GET_INSTANCE_DETAILS,\n  GET_CALENDAR_EVENTS,\n  GET_LICENSE_PLATES,\n  MANAGE_LICENSE_PLATES,\n  GET_LICENSE_PLATE_DETECTIONS,\n  GET_FACE_GROUPING_IMAGES,\n  MOVE_FACE_GROUPING_IMAGE,\n  TRAIN_FACE_MODEL_ACTION,\n  GET_FACES,\n  TRY_FACE_DETECTION_AGAIN,\n} from \"../axios\";\n\n\nexport interface ObjectDetectionImageFileNameInterface {\n  file_name: string,\n}\n\n/**\n * Returns original full object detection image file name for cropped image origin\n * Todo: rename this function name to something smaller\n * @param croppedImageName\n */\nexport async function getObjectDetectionImageFileNameForCroppedImageName(croppedImageName: string): Promise<any> {\n  let fileData = {} as ObjectDetectionImageFileNameInterface;\n  const response = await axios.post(GET_GET_OBJ_IMG_NAME_FROM_CROPPED_IMG, {croppedImageName: croppedImageName});\n  fileData.file_name = response.data.file_name;\n  return fileData;\n}\n\n\nexport interface ObjectDetectionImageInterface {\n  file_name: string,\n  data: string,\n}\n\n/**\n * Get object detection image data\n * @param objectDetectionImageFileName\n */\nexport async function getObjectDetectionImage(objectDetectionImageFileName: string): Promise<any> {\n  let imageData = {} as ObjectDetectionImageInterface;\n  imageData.file_name = objectDetectionImageFileName;\n  const response = await axios.post(GET_OBJECT_DETECTION_IMAGE, {objectDetectionImageFileName: objectDetectionImageFileName});\n  imageData.data = response.data.data;\n  return imageData;\n}\n\n\nexport interface IntelligenceInterface {\n  performance: {\n    loadAvg: string;\n    memUse: string;\n    storageUse: string;\n    instanceCount: number;\n  },\n  activity: {\n    data: [{\n      h: string,\n      a: string,\n    }]\n  },\n  donut: [{\n    label: string,\n    value: number,\n  }]\n}\n\n/**\n * Get intelligence data for selected date\n * @param selectedDate in format like 'YYYY-MM-DD' (new Date().toISOString().substr(0, 10))\n * @return IntelligenceInterface object\n */\nexport async function getIntelligence(selectedDate: string): Promise<any> {\n  const response = await axios.post(GET_INTELLIGENCE, {selectedDate: selectedDate});\n  return response.data as IntelligenceInterface;\n}\n\n\nexport interface LabelInterface {\n  title: string;\n  file: string;\n  image: string;\n}\n\n/**\n * Get labels for donut chart label selection\n * @param selectedDate selected date in 'YYYY-MM-DD' format\n * @param label string like 'person'\n * @return LabelInterface\n */\nexport async function loadLabelImages(selectedDate: string, label: string) {\n  const response = await axios.post(GET_LABEL_IMAGES, {selectedDate: selectedDate, label: label});\n  return response.data.images as LabelInterface[];\n}\n\n\nexport interface SuperResolutionInterface {\n  srImage: boolean;\n  data: string;\n  detectionResult: string;\n  color: string;\n  file_create_date: string;\n}\n\n/**\n * Return super resolution image for selected label\n * if not exists, will return normal image with more details\n * @param label selected label group\n * @param imageFile label image name\n */\nexport async function getSuperResolutionImage(label: string, imageFile: string) {\n  const response = await axios.post(GET_SUPER_RESOLUTION_IMAGE, {label: label, imageFile: imageFile});\n  return response.data as SuperResolutionInterface;\n}\n\n\nexport interface InstanceInterface {\n  id: number;\n  process_name: string;\n  createdAt: string;\n  updatedAt: string;\n}\n\n/**\n * Return current running instances / processes\n * this means python processes\n */\nexport async function getInstanceDetails() {\n  const response = await axios.get(GET_INSTANCE_DETAILS);\n  return response.data as InstanceInterface;\n}\n\n\nexport interface CalendarEventsInterface {\n  title: string;\n  start: string;\n  end: string;\n  description: string;\n  file_name_cropped: string;\n}\n\nexport async function getCalendarEvents(dateRangeStartDate: string, dateRangeEndDate: string) {\n  const response = await axios.post(GET_CALENDAR_EVENTS, {\n    dateRangeStartDate: dateRangeStartDate,\n    dateRangeEndDate: dateRangeEndDate\n  });\n  return response.data.events as CalendarEventsInterface[];\n}\n\n\nexport interface LicensePlatesInterface {\n  enabled: number;\n  id: string;\n  licence_plate: string;\n  owner_name: string;\n}\n\n/**\n * Get user added license plates\n * @method GET\n */\nexport async function getLicensePlates() {\n  const response = await axios.get(GET_LICENSE_PLATES);\n  return response.data.plates;\n}\n\n/**\n * Add new owner & license plate\n * @param licencePlate plate string\n * @param ownerName name of owner or any other information\n * @param dataId data table data id, given as zero when not intended to update detection result\n * @method POST\n */\nexport async function addLicensePlate(licencePlate: string, ownerName: string, dataId: number) {\n  const response = await axios.post(MANAGE_LICENSE_PLATES, {\n    licence_plate: licencePlate,\n    owner_name: ownerName,\n    data_id: dataId\n  });\n  return response.data;\n}\n\n/**\n * Delete vehicle owner record\n * @param id used for deletion\n * @method DELETE\n */\nexport async function removeLicensePlate(id: string) {\n  const response = await axios.delete(MANAGE_LICENSE_PLATES + '/' + id);\n  return response.data;\n}\n\n/**\n * Update one owner row details\n * @param id row to update\n * @param licencePlate string\n * @param ownerName name or other details\n * @method PUT\n */\nexport async function updateLicensePlate(id: string, licencePlate: string, ownerName: string) {\n  const response = await axios.put(MANAGE_LICENSE_PLATES, {id: id, licence_plate: licencePlate, owner_name: ownerName});\n  return response.data;\n}\n\n\nexport interface LicensePlateDetectionsInterface {\n  id: number;\n  file: string;\n  title: string;\n  label: string;\n  ownerName: string;\n  detectionResult: string;\n  detectionCorrected: string;\n  image: string; // base64 encoded image data\n  objectDetectionFileName: string;\n}\n\nexport async function getLicensePlateDetections(resultOption: string, startDate: string, endDate: string) {\n  const response = await axios.post(GET_LICENSE_PLATE_DETECTIONS, {\n    resultOption: resultOption,\n    selectedDateStart: startDate,\n    selectedDateEnd: endDate,\n  });\n  return response.data.licensePlates as LicensePlateDetectionsInterface[];\n}\n\n\nexport interface FaceGroupingNamesInterface {\n  name: string;\n}\n\nexport interface FaceGroupingImagesInterface {\n  file: string;\n  title: string;\n  image: string; // base64 encoded image data\n}\n\nexport interface FaceGroupingData {\n  names: FaceGroupingNamesInterface[],\n  images: FaceGroupingImagesInterface[],\n}\n\nexport async function getFaceGroupingImages(): Promise<FaceGroupingData> {\n  const response = await axios.get(GET_FACE_GROUPING_IMAGES);\n  let faceGroupingData = {} as FaceGroupingData;\n  faceGroupingData.names = response.data.names as FaceGroupingNamesInterface[];\n  faceGroupingData.images = response.data.images as FaceGroupingImagesInterface[];\n  return faceGroupingData;\n}\n\n\nexport async function moveFaceGroupingImage(name: string, rectFileName: string) {\n  const response = await axios.post(MOVE_FACE_GROUPING_IMAGE, {name: name, rectFileName: rectFileName});\n  return response.data;\n}\n\n\nexport async function trainFaceModelAction() {\n  const response = await axios.get(TRAIN_FACE_MODEL_ACTION);\n  return response.data;\n}\n\n\nexport interface FacesInterface {\n  id: string;\n  title: string;\n  image: string; // base64 encoded image data\n  detectionResult: string;\n}\n\nexport async function getFaces(selectedDate: string): Promise<FacesInterface[]> {\n  const response = await axios.post(GET_FACES, {selectedDate: selectedDate});\n  return response.data.faces as FacesInterface[];\n}\n\n\nexport async function tryFaceDetectionAgain(id: string) {\n  const response = await axios.post(TRY_FACE_DETECTION_AGAIN, {id: id});\n  return response.data;\n}\n","import React, {Component} from \"react\";\nimport {Card, Table} from \"react-bootstrap\";\nimport {getInstanceDetails, InstanceInterface} from \"../../../utils/HttpUtils\";\n\n\nclass Instances extends Component {\n  state = {\n    instances: [] as InstanceInterface[]\n  };\n\n  componentDidMount(): void {\n    this.loadInstanceDetails().then(() => null);\n  }\n\n  async loadInstanceDetails() {\n    const instances = await getInstanceDetails() as InstanceInterface;\n    this.setState({instances: instances})\n  }\n\n  render() {\n    let instances: JSX.Element[] = [];\n\n    if (this.state.instances !== undefined) {\n      if (this.state.instances.length > 0) {\n        instances = this.state.instances.map(instance => {\n          return (\n            <tr key={instance.id}>\n              <td>{instance.id}</td>\n              <td>{instance.process_name}</td>\n              <td>{instance.updatedAt}</td>\n              <td>{instance.createdAt}</td>\n            </tr>\n          )\n        });\n      }\n    }\n\n    return (\n      <div>\n        <Card bg=\"dark\" text=\"light\">\n          <Card.Header>\n            Running instances\n          </Card.Header>\n          <Card.Body style={{padding: '0px'}}>\n            <div className=\"table-responsive\">\n              <Table striped bordered hover variant=\"dark\" style={{minWidth: '650px'}}>\n                <thead>\n                <tr>\n                  <th>ID</th>\n                  <th>Process</th>\n                  <th>Alive check</th>\n                  <th>Started</th>\n                </tr>\n                </thead>\n                <tbody>\n                {instances}\n                </tbody>\n              </Table>\n            </div>\n          </Card.Body>\n        </Card>\n\n      </div>\n    )\n  }\n}\n\n\nexport default Instances;\n\n","import React from \"react\";\nimport {Button, Modal} from \"react-bootstrap\";\n\n/**\n * This class idea is to show big object detection raw images from anywhere where it's called\n */\nexport const GenericImageModal = (props: ModalPropsInterface) => {\n  // Todo: set modal 'animation={false}' to avoid findDOMNode warning, I use it for now since animations are cool\n  return (\n    <>\n      <Modal size=\"lg\" show={props.show} onHide={props.closeHandler()}>\n        <Modal.Header closeButton>\n          <Modal.Title>\n            <h5>{props.title}</h5>\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <p className=\"text-muted mb-2\">{props.description}</p>\n\n          {props.showBadges ?\n            <div className=\"d-flex flex-row bd-highlight mb-2\">\n              <div className=\"bd-highlight\"><span\n                className=\"badge badge-warning\">{props.srImage ? 'SR version' : 'Normal version'}</span></div>\n              <div className=\"ml-2 bd-highlight\"><span className=\"badge badge-info\">{props.detectionResult}</span>\n              </div>\n              <div className=\"ml-2 bd-highlight\"><span className=\"badge badge-secondary\">{props.color}</span></div>\n              <div className=\"ml-2 bd-highlight\"><span className=\"badge badge-dark\">{props.additionalInfo}</span></div>\n            </div> : null\n          }\n\n          <img className=\"card-img-right\" style={{width: '100%', height: '100%'}}\n               alt=\"genericModalImage\" src={props.src}/>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={props.closeHandler()}>\n            Close\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </>\n  )\n};\n\nexport interface ModalPropsInterface {\n  show: boolean;\n  title: string;\n  description: string;\n  src: string; // This is base64 encoded image data\n  closeHandler: Function;\n  showBadges: boolean;\n  srImage: boolean;\n  detectionResult: string;\n  color: string;\n  additionalInfo: string;\n}\n","import React from \"react\";\nimport {Button, Modal} from \"react-bootstrap\";\nimport {Line} from \"react-chartjs-2\";\n\n\nexport const ActivityModal = (props: ActivityModalInterface) => {\n  if (props.chartData === undefined) {\n    return <></>\n  }\n\n  const labels: string[] = [];\n  const data: number[] = [];\n\n  props.chartData.forEach((cd: ActivityChartDataInterface) => {\n    labels.push(cd.h);\n    data.push(cd.a);\n  });\n\n  const lineChartSpec = {\n    labels: labels,\n    datasets: [\n      {\n        label: '24-hour dataset',\n        fill: false,\n        lineTension: 0.1,\n        backgroundColor: 'rgba(75,192,192,0.4)',\n        borderColor: 'rgba(75,192,192,1)',\n        borderCapStyle: 'butt',\n        borderDash: [],\n        borderDashOffset: 0.0,\n        borderJoinStyle: 'miter',\n        pointBorderColor: 'rgba(75,192,192,1)',\n        pointBackgroundColor: '#fff',\n        pointBorderWidth: 1,\n        pointHoverRadius: 5,\n        pointHoverBackgroundColor: 'rgba(75,192,192,1)',\n        pointHoverBorderColor: 'rgba(220,220,220,1)',\n        pointHoverBorderWidth: 2,\n        pointRadius: 1,\n        pointHitRadius: 10,\n        data: data,\n      }\n    ]\n  };\n\n  return (\n    <>\n      <Modal size=\"lg\" show={props.show} onHide={props.closeHandler()}>\n        <Modal.Header closeButton>\n          <Modal.Title>\n            <h5>{props.title}</h5>\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <p className=\"text-muted mb-2\">{props.description}</p>\n          <Line data={lineChartSpec}/>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={props.closeHandler()}>\n            Close\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </>\n  )\n};\n\nexport interface ActivityChartDataInterface {\n  a: number; // activity\n  h: string; // hour\n}\n\nexport interface ActivityModalInterface {\n  show: boolean;\n  title: string;\n  description: string;\n  closeHandler: Function;\n  chartData: ActivityChartDataInterface[];\n}\n","import React, {Component} from \"react\";\nimport {Badge, Button, Card} from \"react-bootstrap\";\nimport {Doughnut} from 'react-chartjs-2';\nimport {LoadingIndicator} from \"../../../components/LoadingIndicator/LoadingIndicator\";\nimport {\n  getIntelligence,\n  IntelligenceInterface,\n  loadLabelImages,\n  LabelInterface,\n  getObjectDetectionImageFileNameForCroppedImageName,\n  ObjectDetectionImageFileNameInterface,\n  getObjectDetectionImage,\n  ObjectDetectionImageInterface,\n  getSuperResolutionImage, SuperResolutionInterface,\n} from '../../../utils/HttpUtils';\nimport {connect} from 'react-redux';\nimport {ReduxPropsInterface} from \"../../../store/reducers/dateReducer\";\nimport {GenericImageModal, ModalPropsInterface} from \"../../../components/GenericImageModal/GenericImageModal\";\nimport {\n  ActivityChartDataInterface,\n  ActivityModal,\n  ActivityModalInterface\n} from \"../../../components/ActivityModal/ActivityModal\";\n\n\nexport interface DonutDatasetsInterface {\n  data: Array<number>,\n  backgroundColor: Array<string>,\n  hoverBackgroundColor: Array<string>\n}\n\nexport interface LabelDonutDataInterface {\n  labels: Array<string>,\n  datasets: Array<DonutDatasetsInterface>\n}\n\nlet clickHoldTimer: any = null;\nlet longClickHandled: boolean = false;\n\nclass Labels extends Component<ReduxPropsInterface> {\n  state = {\n    selectedDate: null,\n    isLoading: true,\n    labelSelection: null,\n    instanceCount: 0,\n    storageUse: 'N/A GB',\n    labelDonutData: {} as LabelDonutDataInterface,\n    labelImages: [] as LabelInterface[],\n    genericImageModalData: {show: false} as ModalPropsInterface,\n    activityModal: {show: false} as ActivityModalInterface,\n    activityChartData: [] as ActivityChartDataInterface[],\n  };\n\n  componentDidUpdate(prevProps: Readonly<ReduxPropsInterface>, prevState: Readonly<{}>, snapshot?: any): void {\n    if (this.state.selectedDate !== this.props.selectedDate) {\n      this.loadIntelligence(this.props.selectedDate).then(() => null);\n    }\n  }\n\n  componentDidMount(): void {\n    this.loadIntelligence(this.props.selectedDate).then(() => null);\n  }\n\n  async loadIntelligence(date: string) {\n    const result = await getIntelligence(date) as IntelligenceInterface;\n    let labelDonutData = {} as LabelDonutDataInterface;\n\n    labelDonutData.labels = [];\n    labelDonutData.datasets = [];\n\n    let dataSet: DonutDatasetsInterface = {\n      data: [],\n      backgroundColor: [],\n      hoverBackgroundColor: []\n    };\n    result.donut.forEach(donut => {\n      labelDonutData.labels.push(donut.label);\n      dataSet.data.push(donut.value);\n      dataSet.backgroundColor.push(\"#13697d\"); // Todo, add dynamic random coloring from color range maybe?\n      dataSet.hoverBackgroundColor.push(\"#1698af\");\n    });\n\n    labelDonutData.datasets.push(dataSet);\n\n    this.setState({\n      selectedDate: date,\n      isLoading: false,\n      instanceCount: result.performance.instanceCount,\n      storageUse: result.performance.storageUse,\n      labelDonutData: labelDonutData,\n      activityChartData: result.activity.data,\n    });\n  };\n\n  onDonutElementClickHandler = (element: any) => {\n    if (element !== undefined && element.length > 0) {\n      const index = element[0]._index;\n      const labelSelected = this.state.labelDonutData.labels[index];\n      this.setState({isLoading: true, labelSelection: labelSelected});\n      this.loadLabelImagesHandler(this.props.selectedDate, labelSelected).then(() => null);\n    }\n  };\n\n  async loadLabelImagesHandler(date: string, label: string) {\n    const result = await loadLabelImages(date, label) as LabelInterface[];\n    this.setState({isLoading: false, labelImages: result});\n  }\n\n  async labelImageClickHandler(file: string, loadObjectDetectionImage: boolean) {\n    this.setState({isLoading: true});\n    if (loadObjectDetectionImage) {\n      this.loadObjectDetectionImageHandler(file).then(() => null);\n    } else {\n      this.loadSuperResolutionImage(file).then(() => null);\n    }\n  }\n\n  async loadObjectDetectionImageHandler(croppedImageName: string) {\n    this.setState({isLoading: true});\n    const file = await getObjectDetectionImageFileNameForCroppedImageName(croppedImageName) as ObjectDetectionImageFileNameInterface;\n    const image = await getObjectDetectionImage(file.file_name) as ObjectDetectionImageInterface;\n    this.setState({\n      isLoading: false,\n      genericImageModalData: {\n        show: true,\n        title: image.file_name,\n        description: 'Full object detection image for selected label where label is originating',\n        src: image.data,\n      }\n    });\n  };\n\n  async loadSuperResolutionImage(croppedImageName: string) {\n    this.setState({isLoading: true});\n    const image = await getSuperResolutionImage(this.state.labelSelection || \"\", croppedImageName) as SuperResolutionInterface;\n    // Todo, generic modal image needs more fields to show color, detection result etc\n    this.setState({\n      isLoading: false,\n      genericImageModalData: {\n        show: true,\n        title: croppedImageName,\n        description: (image.srImage ? 'This is processed super resolution image' : 'This is standard image'),\n        src: image.data,\n        showBadges: true,\n        srImage: image.srImage,\n        detectionResult: image.detectionResult,\n        color: image.color,\n      }\n    });\n  };\n\n  genericImageModalCloseHandler = () => {\n    this.setState({genericImageModalData: {show: false}});\n  };\n\n  activityModalCloseHandler = () => {\n    this.setState({activityModal: {show: false}});\n  };\n\n  handleLabelMouseDown = (file: string) => {\n    clickHoldTimer = setTimeout(() => {\n      console.log('Mouse long click run');\n      this.labelImageClickHandler(file, true).then(() => null);\n      longClickHandled = true;\n    }, 1000);\n  };\n\n  handleLabelMouseUp = (file: string) => {\n    clearTimeout(clickHoldTimer);\n    if (!longClickHandled) {\n      console.log('Mouse short click run');\n      this.labelImageClickHandler(file, false).then(() => null);\n    }\n    longClickHandled = false;\n  };\n\n\n  render() {\n    let labels: JSX.Element[] = [];\n\n    if (this.state.labelImages !== undefined) {\n      if (this.state.labelImages.length > 0) {\n        labels = this.state.labelImages.map(image => {\n          return (\n            <div\n              onMouseDown={() => this.handleLabelMouseDown(image.file)}\n              onMouseUp={() => this.handleLabelMouseUp(image.file)}\n              key={image.file}>\n              <img\n                id={image.file}\n                title={image.title}\n                className=\"CursorPointer mr-1 ml-1 mt-1 magictime vanishIn\"\n                style={{maxHeight: '120px', maxWidth: '120px', width: 'auto', height: 'auto'}}\n                key={image.file}\n                src={image.image}\n                alt={image.file}\n              />\n            </div>\n          )\n        });\n      }\n    }\n\n    return (\n      <div>\n        <Card bg=\"Light\" text=\"dark\">\n          <Card.Header>\n            <div className=\"row\">\n              <div className=\"col-sm\">\n                <b>Label viewer</b>\n              </div>\n              <div className=\"col-sm text-right\">\n                <Badge variant=\"dark\" className=\"mr-2\">IC{this.state.instanceCount}</Badge>\n                <Badge variant=\"dark\">STR {this.state.storageUse}</Badge>\n              </div>\n            </div>\n          </Card.Header>\n          <Card.Body>\n            <div style={{height: '300px'}}>\n              {\n                this.state.labelDonutData.datasets !== undefined ?\n                  <Doughnut\n                    onElementsClick={(element: any) => this.onDonutElementClickHandler(element)}\n                    data={this.state.labelDonutData}\n                    height={300}\n                    options={{maintainAspectRatio: false}}/>\n                  : this.state.isLoading ? <LoadingIndicator isDark={true}/> : null\n              }\n            </div>\n\n            <div className=\"d-flex justify-content-center flex-wrap mt-4\">\n              {labels}\n            </div>\n\n          </Card.Body>\n          <Card.Footer>\n            <small\n              className=\"text-muted\">{this.state.labelSelection === null ?\n              'No label selected' :\n              'Selected ' + this.state.labelSelection + ' label'}</small>\n            <Button onClick={() => this.showActivityModalHandler()} className=\"float-right\" variant=\"outline-dark\"\n                    size=\"sm\">Activity</Button>\n          </Card.Footer>\n        </Card>\n\n        { /* Handle showing loading indicator */\n          this.state.isLoading ? <LoadingIndicator isDark={false}/> : null\n        }\n\n        <GenericImageModal\n          closeHandler={() => this.genericImageModalCloseHandler}\n          show={this.state.genericImageModalData.show}\n          description={this.state.genericImageModalData.description}\n          src={this.state.genericImageModalData.src}\n          title={this.state.genericImageModalData.title}\n          showBadges={this.state.genericImageModalData.showBadges}\n          srImage={this.state.genericImageModalData.srImage}\n          detectionResult={this.state.genericImageModalData.detectionResult}\n          color={this.state.genericImageModalData.color}\n          additionalInfo={this.state.genericImageModalData.additionalInfo}\n        />\n\n        <ActivityModal\n          show={this.state.activityModal.show}\n          title={this.state.activityModal.title}\n          description={this.state.activityModal.description}\n          closeHandler={() => this.activityModalCloseHandler}\n          chartData={this.state.activityModal.chartData}\n        />\n\n      </div>\n    )\n  }\n\n  showActivityModalHandler = () => {\n    this.setState({\n      activityModal: {\n        show: true,\n        title: 'Activity for today',\n        description: 'Showing activity from start of this day',\n        chartData: this.state.activityChartData,\n      }\n    });\n  }\n\n}\n\nconst mapStateToProps = (state: any): any => {\n  return {\n    selectedDate: state.dateReducer.selectedDate,\n  };\n};\n\nexport default connect(mapStateToProps)(Labels);\n","import React, {Component} from \"react\";\nimport {ReduxPropsInterface} from \"../../../store/reducers/dateReducer\";\nimport {\n  INCREMENT_DAY,\n  DECREMENT_DAY,\n  CALENDAR_SELECTION\n} from '../../../store/actionTypes';\nimport {connect} from \"react-redux\";\n\n\nclass DateSelector extends Component<ReduxPropsInterface> {\n\n  render() {\n    return (\n      <div>\n        <div className=\"\">\n          <div className=\"input-group\">\n            <div className=\"input-group-prepend\">\n              <span className=\"input-group-text\">Selected day</span>\n            </div>\n            <input id=\"selected_day_field\" type=\"date\" className=\"form-control\" placeholder=\"Change day\"\n                   aria-label=\"Day change\" value={this.props.selectedDate} onChange={(event: any) => this.props.onDateSelected(event)}/>\n            <div className=\"input-group-append\">\n              <button className=\"btn btn-outline-info\" type=\"button\"\n                      onClick={this.props.onDecrementDay}>\n                 Earlier\n              </button>\n              <button className=\"btn btn-outline-info\" type=\"button\"\n                      onClick={this.props.onIncrementDay}>\n                Next \n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state: any): any => {\n  return {\n    selectedDate: state.dateReducer.selectedDate,\n  };\n};\n\nconst mapDispatchToProps = (dispatch: any) => {\n  return {\n    onIncrementDay: () => dispatch({type: INCREMENT_DAY, days: 1}),\n    onDecrementDay: () => dispatch({type: DECREMENT_DAY, days: -1}),\n    onDateSelected: (value: any) => dispatch({type: CALENDAR_SELECTION, calendar: value}),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DateSelector);\n","import React, {Component} from \"react\";\nimport {ReduxPropsInterface} from \"../../../store/reducers/dateReducer\";\nimport {DATE_RANGE_END_DATE_SELECTED, DATE_RANGE_START_DATE_SELECTED} from \"../../../store/actionTypes\";\nimport {connect} from \"react-redux\";\n\n\nclass DateRangeSelector extends Component<ReduxPropsInterface> {\n  render() {\n    return (\n      <div>\n        <div className=\"input-group mb-2\">\n          <div className=\"input-group-prepend\">\n            <span className=\"input-group-text\">Day's between</span>\n          </div>\n          <input type=\"date\" className=\"form-control\" placeholder=\"Change day\"\n                 aria-label=\"Day change\"\n                 value={this.props.dateRangeStartDate}\n                 onChange={(event: any) => this.props.onDateRangeStartDateSelected(event)}/>\n          <input type=\"date\" className=\"form-control\" placeholder=\"Change day\"\n                 aria-label=\"Day change\"\n                 value={this.props.dateRangeEndDate}\n                 onChange={(event: any) => this.props.onDateRangeEndDateSelected(event)}/>\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state: any): any => {\n  return {\n    dateRangeStartDate: state.dateReducer.dateRangeStartDate,\n    dateRangeEndDate: state.dateReducer.dateRangeEndDate,\n  };\n};\n\nconst mapDispatchToProps = (dispatch: any) => {\n  return {\n    onDateRangeStartDateSelected: (value: string) => dispatch({type: DATE_RANGE_START_DATE_SELECTED, calendar: value}),\n    onDateRangeEndDateSelected: (value: string) => dispatch({type: DATE_RANGE_END_DATE_SELECTED, calendar: value}),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DateRangeSelector);\n","import React, {Component} from \"react\";\nimport {\n  CalendarEventsInterface,\n  getCalendarEvents,\n  getObjectDetectionImage,\n  getObjectDetectionImageFileNameForCroppedImageName,\n  ObjectDetectionImageFileNameInterface,\n  ObjectDetectionImageInterface\n} from \"../../../utils/HttpUtils\";\nimport FullCalendar, {EventClickArg} from \"@fullcalendar/react\";\nimport dayGridPlugin from '@fullcalendar/daygrid'\nimport timeGridPlugin from '@fullcalendar/timegrid'\nimport interactionPlugin from '@fullcalendar/interaction'\nimport {Card} from \"react-bootstrap\";\nimport {GenericImageModal, ModalPropsInterface} from \"../../../components/GenericImageModal/GenericImageModal\";\nimport DateRangeSelector from \"../DateRangeSelector/DateRangeSelector\";\nimport {ReduxPropsInterface} from \"../../../store/reducers/dateReducer\";\nimport {connect} from \"react-redux\";\n\nclass Calendar extends Component<ReduxPropsInterface> {\n  state = {\n    dateRangeStartDate: null,\n    dateRangeEndDate: null,\n    calendarWeekends: true,\n    calendarEvents: [] as CalendarEventsInterface[],\n    genericImageModalData: {show: false} as ModalPropsInterface,\n  };\n\n  calendarComponentRef = React.createRef<FullCalendar>();\n\n  componentDidMount(): void {\n    this.loadCalendarEvents().then(() => null);\n  }\n\n  componentDidUpdate(prevProps: Readonly<ReduxPropsInterface>, prevState: Readonly<{}>, snapshot?: any): void {\n    if (this.state.dateRangeStartDate !== this.props.dateRangeStartDate\n      || this.state.dateRangeEndDate !== this.props.dateRangeEndDate) {\n      this.loadCalendarEvents().then(() => null);\n    }\n  }\n\n  async loadCalendarEvents() {\n    const events = await getCalendarEvents(this.props.dateRangeStartDate, this.props.dateRangeEndDate);\n    this.setState({\n      calendarEvents: events,\n      dateRangeStartDate: this.props.dateRangeStartDate,\n      dateRangeEndDate: this.props.dateRangeEndDate\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <Card bg=\"Light\" text=\"dark\">\n          <Card.Header>\n            <b>Vehicle activity</b>\n          </Card.Header>\n          <Card.Body>\n            <div>\n              <DateRangeSelector {...this.props}/>\n              <FullCalendar\n                plugins={[dayGridPlugin, timeGridPlugin, interactionPlugin]}\n                ref={this.calendarComponentRef}\n                weekends={this.state.calendarWeekends}\n                events={this.state.calendarEvents}\n                dateClick={this.handleDateClick}\n                eventClick={this.handleEventClick}\n                headerToolbar={{\n                  left: 'prev,next today',\n                  center: 'title',\n                  right: 'dayGridMonth,timeGridWeek,timeGridDay'\n                }}\n                initialView='timeGridWeek'\n                height={600}\n              />\n            </div>\n          </Card.Body>\n        </Card>\n\n        <GenericImageModal\n          closeHandler={() => this.genericImageModalCloseHandler}\n          show={this.state.genericImageModalData.show}\n          description={this.state.genericImageModalData.description}\n          src={this.state.genericImageModalData.src}\n          title={this.state.genericImageModalData.title}\n          showBadges={this.state.genericImageModalData.showBadges}\n          srImage={this.state.genericImageModalData.srImage}\n          detectionResult={this.state.genericImageModalData.detectionResult}\n          color={this.state.genericImageModalData.color}\n          additionalInfo={this.state.genericImageModalData.additionalInfo}\n        />\n\n      </div>\n    )\n  }\n\n  handleDateClick = (arg: any) => {\n    // console.log(arg);\n  };\n\n  handleEventClick = (clickInfo: EventClickArg) => {\n    const title = clickInfo.event.title;\n    const file = clickInfo.event.extendedProps.file_name_cropped;\n    const description = clickInfo.event.extendedProps.description;\n    this.loadObjectDetectionImageHandler(file, title, description).then(() => null);\n  };\n\n  async loadObjectDetectionImageHandler(croppedImageName: string, detectionResult: string, description: string) {\n    this.setState({isLoading: true});\n    const file = await getObjectDetectionImageFileNameForCroppedImageName(croppedImageName) as ObjectDetectionImageFileNameInterface;\n    const image = await getObjectDetectionImage(file.file_name) as ObjectDetectionImageInterface;\n    this.setState({\n      isLoading: false,\n      genericImageModalData: {\n        show: true,\n        title: image.file_name,\n        description: 'Original image file where selected calendar event license plate is seen',\n        src: image.data,\n        showBadges: true,\n        detectionResult: detectionResult,\n        additionalInfo: description,\n      }\n    });\n  };\n\n  genericImageModalCloseHandler = () => {\n    this.setState({genericImageModalData: {show: false}});\n  };\n\n}\n\nconst mapStateToProps = (state: any): any => {\n  return {\n    dateRangeStartDate: state.dateReducer.dateRangeStartDate,\n    dateRangeEndDate: state.dateReducer.dateRangeEndDate,\n  };\n};\n\nexport default connect(mapStateToProps)(Calendar);\n","import React, {Component} from \"react\";\nimport {Card} from \"react-bootstrap\";\nimport {\n  FacesInterface,\n  getFaces, tryFaceDetectionAgain,\n} from \"../../../utils/HttpUtils\";\nimport {ReduxPropsInterface} from \"../../../store/reducers/dateReducer\";\nimport {connect} from \"react-redux\";\nimport styles from './FaceIdentity.module.css'\n\n\nclass FaceIdentity extends Component<ReduxPropsInterface> {\n  state = {\n    faceDetections: [] as FacesInterface[]\n  };\n\n  componentDidMount(): void {\n    this.getFaces().then(() => null);\n  }\n\n  async getFaces() {\n    const faces = await getFaces(this.props.selectedDate) as FacesInterface[];\n    this.setState({faceDetections: faces})\n  }\n\n  render() {\n    let faces: JSX.Element[] = [];\n\n    if (this.state.faceDetections !== undefined) {\n      if (this.state.faceDetections.length > 0) {\n        faces = this.state.faceDetections.map(face => {\n          return (\n            <div key={face.id}\n                 className={styles.zoom}\n                 style={{cursor: 'pointer'}}\n                 onClick={async () => await this.onFaceClickHandler(face.id)}>\n              <Card style={{maxWidth: '90px'}} className=\"mr-1 mt-1 ml-1 mb-1\">\n                <Card.Img variant=\"top\" src={face.image} style={{maxHeight: '120px'}}/>\n                <Card.Body className=\"p-2\">\n                  <Card.Title className=\"m-0\">\n                    <small>{face.detectionResult}</small>\n                  </Card.Title>\n                </Card.Body>\n                <Card.Footer className=\"p-2\">\n                  <small className=\"text-muted\">{face.title}</small>\n                </Card.Footer>\n              </Card>\n            </div>\n          );\n        });\n      }\n    }\n\n    return (\n      <div>\n        <Card bg=\"light\" text=\"dark\">\n          <Card.Header>\n            Face identifications\n          </Card.Header>\n          <Card.Body style={{padding: '0px'}}>\n            <div className=\"d-flex justify-content-center flex-wrap\">\n              {faces}\n            </div>\n          </Card.Body>\n          <Card.Footer className=\"p-2\">\n            <small className=\"text-muted\">Face identification result are mostly indicative and may not be\n              accurate</small>\n          </Card.Footer>\n        </Card>\n      </div>\n    )\n  }\n\n\n  async onFaceClickHandler(id: string) {\n    // eslint-disable-next-line no-restricted-globals\n    if (confirm(\"Try detection again for this image?\")) {\n      const result = await tryFaceDetectionAgain(id);\n      // eslint-disable-next-line no-restricted-globals\n      alert(result);\n    }\n  }\n\n}\n\nconst mapStateToProps = (state: any): any => {\n  return {\n    selectedDate: state.dateReducer.selectedDate,\n  };\n};\n\nexport default connect(mapStateToProps)(FaceIdentity);\n\n\n","import React, {Component} from \"react\";\nimport Instances from \"./Instances/Instances\";\nimport Labels from \"./Labels/Labels\";\nimport {connect} from \"react-redux\";\nimport {ReduxPropsInterface} from \"../../store/reducers/dateReducer\";\nimport DateSelector from \"./DateSelector/DateSelector\";\nimport Calendar from \"./Calendar/Calendar\";\nimport FaceIdentity from \"./FaceIdentity/FaceIdentity\";\n\nclass Home extends Component<ReduxPropsInterface> {\n  render() {\n    return (\n      <div>\n        <div className=\"mt-2 mr-2 ml-2\">\n          <DateSelector {...this.props} />\n        </div>\n        <div className=\"mt-2 mr-2 ml-2\">\n          <Labels {...this.props} />\n        </div>\n        <div className=\"mt-2 mr-2 ml-2\">\n          <Calendar {...this.props} />\n        </div>\n        <div className=\"mt-2 mr-2 ml-2\">\n          <Instances/>\n        </div>\n        <div className=\"mt-2 mr-2 ml-2\">\n          <FaceIdentity {...this.props} />\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state: any): any => {\n  return {\n    selectedDate: state.dateReducer.selectedDate,\n  };\n};\n\nexport default connect(mapStateToProps)(Home);\n","import React, {Component} from \"react\";\nimport axios, {GET_FACES_FOR_DAY_PATH} from \"../../axios\";\nimport {GenericImageModal, ModalPropsInterface} from \"../../components/GenericImageModal/GenericImageModal\";\nimport {\n  getObjectDetectionImageFileNameForCroppedImageName,\n  getObjectDetectionImage,\n  ObjectDetectionImageFileNameInterface,\n  ObjectDetectionImageInterface\n} from '../../utils/HttpUtils'\nimport {LoadingIndicator} from \"../../components/LoadingIndicator/LoadingIndicator\";\n\n\ninterface FacesInterface {\n  title: string,\n  file: string,\n  image: string,\n}\n\nclass Faces extends Component {\n  private _isMounted: boolean;\n\n  state = {\n    selectedDay: new Date().toISOString().substr(0, 10),\n    faceImages: [] as FacesInterface[],\n    intervalId: 0,\n    genericImageModalData: {show: false} as ModalPropsInterface,\n    isLoading: true,\n  };\n\n\n  constructor(props: any) {\n    super(props);\n    this._isMounted = false;\n  }\n\n  componentDidMount(): void {\n    this._isMounted = true;\n    this.loadFaceImages(this.state.selectedDay);\n    const intervalId = setInterval(() => this.loadFaceImages(this.state.selectedDay), 60 * 1000);\n    this.setState({intervalId: intervalId});\n  }\n\n  componentWillUnmount(): void {\n    clearInterval(this.state.intervalId);\n    this._isMounted = false;\n  }\n\n  loadEarlierDayHandler = () => {\n    let date = new Date(this.state.selectedDay);\n    date.setDate(date.getDate() - 1);\n    const dateStr = date.toISOString().substr(0, 10);\n    this.setSelectedDay(dateStr);\n  };\n\n  loadNextDayHandler = () => {\n    let date = new Date(this.state.selectedDay);\n    date.setDate(date.getDate() + 1);\n    const dateStr = date.toISOString().substr(0, 10);\n    this.setSelectedDay(dateStr);\n  };\n\n  setSelectedDay = (date: string) => {\n    this.setState({selectedDay: date});\n    this.loadFaceImages(date);\n  };\n\n  loadFaceImages = (date: string) => {\n    axios.post(GET_FACES_FOR_DAY_PATH, {selectedDate: date}).then((data: any) => {\n      if (this._isMounted) {\n        this.setState({faceImages: this.removeDuplicates(data.data.images as FacesInterface[]), isLoading: false});\n      }\n    }).catch(error => {\n      console.error(error);\n    });\n  };\n\n  removeDuplicates = (faces: FacesInterface[]) => {\n    return faces.filter(\n      (v: FacesInterface, i: number, a: FacesInterface[]) => a.findIndex(\n        t => (t.file === v.file)\n      ) === i\n    );\n  };\n\n\n  async loadObjectDetectionImageHandler(croppedImageName: string) {\n    this.setState({isLoading: true});\n    const file = await getObjectDetectionImageFileNameForCroppedImageName(croppedImageName) as ObjectDetectionImageFileNameInterface;\n    // Todo: implement error handling for null|undefined file with bar functional component + state\n    const image = await getObjectDetectionImage(file.file_name) as ObjectDetectionImageInterface;\n    // Todo: add error handling here also\n    this.setState({\n      isLoading: false,\n      genericImageModalData: {\n        show: true,\n        title: image.file_name,\n        description: 'Original image file where face is detected',\n        src: image.data,\n        showBadges: false,\n      }\n    });\n  };\n\n  genericImageModalCloseHandler = () => {\n    this.setState({genericImageModalData: {show: false}});\n  };\n\n  render() {\n    let faces: JSX.Element[] = [];\n\n    if (this.state.faceImages !== undefined) {\n      if (this.state.faceImages.length > 0) {\n        faces = this.state.faceImages.map(image => {\n          return (\n            <img\n              id={image.file}\n              title={image.title}\n              className=\"CursorPointer mr-1 ml-1 mt-1 magictime spaceInLeft\"\n              style={{maxHeight: '120px', maxWidth: '120px'}}\n              key={image.file}\n              src={image.image}\n              alt={image.file}\n              onClick={async () => await this.loadObjectDetectionImageHandler(image.file)}\n            />\n          )\n        });\n      }\n    }\n\n    return (\n      <div>\n\n        <div className=\"d-flex justify-content-center flex-wrap mb-2 magictime spaceInLeft\">\n          <div className=\"input-group mb-2\" style={{maxWidth: '300px'}}>\n            <input type=\"text\" style={{backgroundColor: '#343a40', color: '#999999'}}\n                   disabled className=\"form-control\" value={this.state.selectedDay}/>\n            <div className=\"input-group-append\">\n              <button className=\"btn btn-outline-info\" type=\"button\" onClick={this.loadEarlierDayHandler}> Earlier\n              </button>\n              <button className=\"btn btn-outline-info\" type=\"button\" onClick={this.loadNextDayHandler}>Next </button>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"d-flex justify-content-center flex-wrap\">\n          {faces}\n        </div>\n\n        <GenericImageModal\n          closeHandler={() => this.genericImageModalCloseHandler}\n          show={this.state.genericImageModalData.show}\n          description={this.state.genericImageModalData.description}\n          src={this.state.genericImageModalData.src}\n          title={this.state.genericImageModalData.title}\n          showBadges={this.state.genericImageModalData.showBadges}\n          srImage={this.state.genericImageModalData.srImage}\n          detectionResult={this.state.genericImageModalData.detectionResult}\n          color={this.state.genericImageModalData.color}\n          additionalInfo={this.state.genericImageModalData.additionalInfo}\n        />\n\n        { /* Handle showing loading indicator */\n          this.state.isLoading ? <LoadingIndicator isDark={false} /> : null\n        }\n\n      </div>\n    )\n  }\n}\n\n\nexport default Faces;\n","/**\n * Get today date\n * @return String date in ISO format\n */\nexport const getNowISODate = (): string => {\n  return new Date().toISOString().substr(0, 10);\n};\n\n/**\n * Increment or decrement X days from ISO String date\n * @param selectedDate ISO string date YYYY-MM-DD\n * @param days number of days, positive or nagative value\n * @constructor\n */\nexport const ChangeDate = (selectedDate: string, days: number) => {\n  let date = new Date(selectedDate);\n  date.setDate(date.getDate() + days);\n  return date.toISOString().substr(0, 10);\n};\n","import React from \"react\";\nimport {Button, Modal} from \"react-bootstrap\";\n\n\nexport const PlateEditModal = (props: PlateEditModalPropsInterface) => {\n  return (\n    <>\n      <Modal size=\"lg\" show={props.show} onHide={props.closeHandler()}>\n        <Modal.Header closeButton>\n          <Modal.Title>\n            <h5>{props.title}</h5>\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <p className=\"text-muted mb-2\">{props.description}</p>\n\n            {\n                props.imageData !== undefined ? <img src={props.imageData} alt={props.title} /> : null\n            }\n\n          <form className=\"mt-4\">\n            <div className=\"form-group\">\n              <label htmlFor=\"new_plate_licence_plate\">Licence plate</label>\n              <input type=\"text\" className=\"form-control\" defaultValue={props.licencePlate}\n                     onChange={(event) => props.lpOnChange(event.target.value)}\n              />\n              <small className=\"form-text text-muted\">Input without lines, example ABC123</small>\n            </div>\n            <div className=\"form-group\">\n              <label htmlFor=\"new_plate_owner_name\">Owner name</label>\n              <input type=\"text\" className=\"form-control\" defaultValue={props.ownerName}\n                     onChange={(event) => props.ownerOnChange(event.target.value)}\n              />\n              <small className=\"form-text text-muted\">Give full owner name</small>\n            </div>\n          </form>\n\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"primary\" onClick={() => props.saveHandler(props)}>\n            Save\n          </Button>\n          <Button variant=\"secondary\" onClick={props.closeHandler()}>\n            Close\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </>\n  );\n};\n\nexport interface PlateEditModalPropsInterface {\n  show: boolean;\n  title: string;\n  description: string;\n  saveHandler: Function;\n  closeHandler: Function;\n  id: string;\n  licencePlate: string;\n  ownerName: string;\n  lpOnChange: Function;\n  ownerOnChange: Function;\n  imageData?: string;\n}\n","/**\n * Simple function is replace non wanted chars\n * @param licensePlate, input license plate\n * @return filtered license plate\n */\nexport const filterLicensePlate = (licensePlate: string) => {\n  return licensePlate.replace('-', '')\n    .replace(' ', '');\n};\n","import React, {Component} from \"react\";\nimport {ReduxPropsInterface} from \"../../../store/reducers/dateReducer\";\nimport {Card} from \"react-bootstrap\";\nimport DateRangeSelector from \"../../Home/DateRangeSelector/DateRangeSelector\";\nimport {\n  addLicensePlate,\n  getLicensePlateDetections,\n  LicensePlateDetectionsInterface,\n} from \"../../../utils/HttpUtils\";\nimport {getNowISODate} from \"../../../utils/DateUtils\";\nimport styles from './Cars.module.css'\nimport {PlateEditModal, PlateEditModalPropsInterface} from \"../../../components/PlateEditModal/PlateEditModal\";\nimport {filterLicensePlate} from \"../../../utils/TextUtils\";\nimport {connect} from \"react-redux\";\n\nclass Cars extends Component<ReduxPropsInterface> {\n  state = {\n    isLoading: false,\n    today: getNowISODate(),\n    resultOption: 'owner_detail_needed',\n    totalPlates: 0,\n    licensePlateDetections: [] as LicensePlateDetectionsInterface[],\n    plateEditModalData: {show: false} as PlateEditModalPropsInterface,\n    dateRangeStartDate: null,\n    dateRangeEndDate: null,\n  };\n\n  componentDidUpdate(prevProps: Readonly<ReduxPropsInterface>, prevState: Readonly<{}>, snapshot?: any): void {\n    if (this.state.dateRangeStartDate !== this.props.dateRangeStartDate\n      || this.state.dateRangeEndDate !== this.props.dateRangeEndDate) {\n      console.log('component update event');\n      this.loadLicensePlateDetections(this.props.dateRangeStartDate, this.props.dateRangeEndDate).then(() => null);\n    }\n  }\n\n  componentDidMount(): void {\n    // Default will load only today contents, loading big chunk is slow\n    this.loadLicensePlateDetections(this.state.today, this.state.today).then(() => null);\n  }\n\n  async loadLicensePlateDetections(startDate: string, endDate: string) {\n    const licensePlateDetections = await getLicensePlateDetections(\n      this.state.resultOption, startDate, endDate) as LicensePlateDetectionsInterface[];\n    this.setState({\n      dateRangeStartDate: startDate,\n      dateRangeEndDate: endDate,\n      licensePlateDetections: licensePlateDetections\n    });\n  }\n\n  render() {\n    let cars: JSX.Element[] = [];\n\n    if (this.state.licensePlateDetections !== undefined) {\n      if (this.state.licensePlateDetections.length > 0) {\n        cars = this.state.licensePlateDetections.map(detection => {\n          return (\n            <div key={detection.file}\n                 className={styles.zoom}\n                 style={{cursor: 'pointer'}}\n                 onClick={() => this.addNewPlateHandler(detection)}>\n              <Card style={{maxWidth: '160px'}} className=\"mr-1 mt-1 ml-1 mb-1\">\n                <Card.Img variant=\"top\" src={detection.image} style={{maxHeight: '100px'}}/>\n                <Card.Body className=\"p-2\">\n                  <Card.Title className=\"m-0\">{detection.detectionResult}</Card.Title>\n                </Card.Body>\n                <Card.Footer className=\"p-2\">\n                  <small className=\"text-muted\">{detection.title}</small>\n                </Card.Footer>\n              </Card>\n            </div>\n          )\n        });\n      }\n    }\n\n    return (\n      <div>\n        <div className=\"magictime vanishIn\">\n          <Card bg=\"Light\" text=\"dark\">\n            <Card.Header>\n              <b>Unknown cars</b>\n            </Card.Header>\n            <Card.Body style={{padding: '0px'}}>\n              <small className=\"ml-2\">By default only cars from today are loaded. Pick day range to load more.</small>\n              <DateRangeSelector {...this.props} />\n              <div className=\"d-flex justify-content-center flex-wrap\">\n                {cars}\n              </div>\n            </Card.Body>\n            <Card.Footer>\n              <small className=\"text-muted\">This view shows you cars which require your attention</small>\n            </Card.Footer>\n          </Card>\n        </div>\n\n        <PlateEditModal\n          show={this.state.plateEditModalData.show}\n          title={this.state.plateEditModalData.title}\n          description={this.state.plateEditModalData.description}\n          id={this.state.plateEditModalData.id}\n          licencePlate={this.state.plateEditModalData.licencePlate}\n          ownerName={this.state.plateEditModalData.ownerName}\n          closeHandler={() => this.plateEditModalCloseHandler}\n          saveHandler={(plateObject: PlateEditModalPropsInterface) => this.plateEditModalSaveHandler(plateObject)}\n          lpOnChange={(lp: string) => this.setState({\n            plateEditModalData: {\n              ...this.state.plateEditModalData,\n              licencePlate: filterLicensePlate(lp)\n            }\n          })}\n          ownerOnChange={(owner: string) => this.setState({\n            plateEditModalData: {\n              ...this.state.plateEditModalData,\n              ownerName: owner\n            }\n          })}\n          imageData={this.state.plateEditModalData.imageData}\n        />\n\n      </div>\n    )\n  }\n\n  plateEditModalCloseHandler = () => {\n    this.setState({plateEditModalData: {show: false}});\n  };\n\n  plateEditModalSaveHandler = (plateObject: PlateEditModalPropsInterface) => {\n    addLicensePlate(plateObject.licencePlate, plateObject.ownerName, Number(plateObject.id)).then((response: any) => {\n      this.plateEditModalCloseHandler();\n    }).catch((error: any) => {\n      alert(error.response.data);\n      this.plateEditModalCloseHandler();\n    }).finally(() => {\n      this.setState({\n        licensePlateDetections: this.state.licensePlateDetections.filter((detection: LicensePlateDetectionsInterface) => {\n          return String(detection.id) !== plateObject.id;\n        })\n      });\n    });\n  };\n\n  addNewPlateHandler = (lpDetection: LicensePlateDetectionsInterface) => {\n    this.setState({\n      plateEditModalData: {\n        show: true,\n        title: 'Add new plate',\n        description: 'Add new plate based on pre detection. Correct the plate based on image. License plate can be given with or without \"-\" character.',\n        id: String(lpDetection.id),\n        licencePlate: lpDetection.detectionResult,\n        ownerName: '',\n        imageData: lpDetection.image,\n      }\n    });\n  };\n\n}\n\nconst mapStateToProps = (state: any): any => {\n  return {\n    dateRangeStartDate: state.dateReducer.dateRangeStartDate,\n    dateRangeEndDate: state.dateReducer.dateRangeEndDate,\n  };\n};\n\nexport default connect(mapStateToProps)(Cars);\n","import React, {Component} from \"react\";\nimport {ReduxPropsInterface} from \"../../../store/reducers/dateReducer\";\nimport {Button, Card, Col, Row, Table} from \"react-bootstrap\";\nimport {\n  addLicensePlate,\n  getLicensePlates,\n  LicensePlatesInterface, removeLicensePlate, updateLicensePlate\n} from \"../../../utils/HttpUtils\";\nimport {PlateEditModal, PlateEditModalPropsInterface} from \"../../../components/PlateEditModal/PlateEditModal\";\nimport {filterLicensePlate} from \"../../../utils/TextUtils\";\n\n\nclass Owners extends Component<ReduxPropsInterface> {\n  state = {\n    totalPlates: 0,\n    licensePlates: [] as LicensePlatesInterface[],\n    filteredLicensePlates: [] as LicensePlatesInterface[],\n    plateEditModalData: {show: false} as PlateEditModalPropsInterface,\n  };\n\n  componentDidMount(): void {\n    this.loadLicensePlates().then(() => null);\n  }\n\n  async loadLicensePlates() {\n    const licensePlates = await getLicensePlates() as LicensePlatesInterface[];\n    this.setState({\n      totalPlates: licensePlates.length,\n      licensePlates: licensePlates,\n      filteredLicensePlates: licensePlates\n    });\n  }\n\n  render() {\n    let owners: JSX.Element[] = [];\n\n    if (this.state.filteredLicensePlates !== undefined) {\n      if (this.state.filteredLicensePlates.length > 0) {\n        owners = this.state.filteredLicensePlates.map(licensePlate => {\n          return (\n            <tr key={licensePlate.id}>\n              <td>{licensePlate.id}</td>\n              <td>{licensePlate.licence_plate}</td>\n              <td>{licensePlate.owner_name}</td>\n              <td>\n                <Row>\n                  <Col>\n                    <Button variant=\"dark\" size=\"sm\" className=\"mr-2\" onClick={\n                      () => this.editPlateHandler(licensePlate.id, licensePlate.licence_plate, licensePlate.owner_name)\n                    }>\n                      Edit\n                    </Button>\n                    <Button variant=\"outline-danger\" size=\"sm\" onClick={\n                      () => this.plateRemoveHandler(licensePlate.id, licensePlate.licence_plate)\n                    }>\n                      Remove\n                    </Button>\n                  </Col>\n                </Row>\n              </td>\n            </tr>\n          )\n        });\n      }\n    }\n\n    return (\n      <div className=\"magictime vanishIn\">\n        <Card bg=\"Light\" text=\"dark\">\n          <Card.Header>\n            <b>Vehicle owners</b>\n          </Card.Header>\n          <Card.Body style={{padding: '0px'}}>\n            <div className=\"row\">\n              <div className=\"col-sm\">\n                <input type=\"text\" className=\"form-control mt-2 mb-2\" placeholder=\"Search filter...\"\n                       aria-label=\"Search\" onChange={(event: any) => this.onSearchFilterChangeHandler(event)}/>\n              </div>\n              <div className=\"col-sm-auto\">\n                <div>\n                  <Button variant=\"info\" className=\"mt-2 mr-2\" onClick={this.addNewPlateHandler}>\n                    Add plate\n                  </Button>\n                </div>\n              </div>\n            </div>\n            <div className=\"table-responsive\">\n              <Table striped bordered hover variant=\"light\" size=\"sm\" style={{minWidth: '650px'}}>\n                <thead>\n                <tr>\n                  <th>ID</th>\n                  <th>Plate</th>\n                  <th>Owner</th>\n                  <th>Actions</th>\n                </tr>\n                </thead>\n                <tbody>\n                {owners}\n                </tbody>\n              </Table>\n            </div>\n          </Card.Body>\n          <Card.Footer>\n            <small className=\"text-muted\">Vehicle count: {this.state.totalPlates}</small>\n          </Card.Footer>\n        </Card>\n\n        <PlateEditModal\n          show={this.state.plateEditModalData.show}\n          title={this.state.plateEditModalData.title}\n          description={this.state.plateEditModalData.description}\n          id={this.state.plateEditModalData.id}\n          licencePlate={this.state.plateEditModalData.licencePlate}\n          ownerName={this.state.plateEditModalData.ownerName}\n          closeHandler={() => this.plateEditModalCloseHandler}\n          saveHandler={(plateObject: PlateEditModalPropsInterface) => this.plateEditModalSaveHandler(plateObject)}\n          lpOnChange={(lp: string) => this.setState({\n            plateEditModalData: {\n              ...this.state.plateEditModalData,\n              licencePlate: filterLicensePlate(lp)\n            }\n          })}\n          ownerOnChange={(owner: string) => this.setState({\n            plateEditModalData: {\n              ...this.state.plateEditModalData,\n              ownerName: owner\n            }\n          })}\n          imageData={undefined}\n        />\n\n\n      </div>\n    )\n  }\n\n  onSearchFilterChangeHandler = (event: any) => {\n    const value = String(event.target.value).toLowerCase();\n    const array = this.state.licensePlates.slice(); // Make new copy\n    this.setState({\n      filteredLicensePlates: array.filter(f => {\n        return String(f.licence_plate).toLowerCase().includes(value) || String(f.owner_name).toLowerCase().includes(value);\n      })\n    });\n  };\n\n  addNewPlateHandler = () => {\n    this.setState({\n      plateEditModalData: {\n        show: true,\n        title: 'Add new plate',\n        description: 'Give new license plate and owner details. License plate can be given with or without \"-\" character.',\n        id: null,\n        licencePlate: '',\n        ownerName: '',\n      }\n    });\n  };\n\n  editPlateHandler = (id: string, plate: string, owner: string) => {\n    this.setState({\n      plateEditModalData: {\n        show: true,\n        title: 'Edit existing plate',\n        description: 'You are editing existing license plate item. License plate can be given with or without \"-\" character.',\n        id: id,\n        licencePlate: plate,\n        ownerName: owner,\n      }\n    });\n  };\n\n  plateEditModalCloseHandler = () => {\n    this.setState({plateEditModalData: {show: false}});\n  };\n\n  plateEditModalSaveHandler = (plateObject: PlateEditModalPropsInterface) => {\n    if (plateObject.id === null) {\n      addLicensePlate(plateObject.licencePlate, plateObject.ownerName, 0).then((response: any) => {\n        this.loadLicensePlates().then(() => null);\n        this.plateEditModalCloseHandler();\n      }).catch((error: any) => {\n        alert(error);\n      });\n    } else {\n      updateLicensePlate(plateObject.id, plateObject.licencePlate, plateObject.ownerName).then((response: any) => {\n        this.loadLicensePlates().then(() => null);\n        this.plateEditModalCloseHandler();\n      }).catch((error: any) => {\n        alert(error);\n      });\n    }\n  };\n\n  plateRemoveHandler = (id: string, lp: string) => {\n    // Todo, fix this confirm no-restricted-globals later!\n    // eslint-disable-next-line no-restricted-globals\n    if (confirm('Delete ' + lp)) {\n      removeLicensePlate(id).then((response: any) => {\n        this.loadLicensePlates().then(() => null);\n      }).catch((error: any) => {\n        alert(error);\n      });\n    }\n  }\n\n}\n\nexport default Owners;\n","import React, {Component} from \"react\";\nimport Cars from \"./Cars/Cars\";\nimport {connect} from \"react-redux\";\nimport {ReduxPropsInterface} from \"../../store/reducers/dateReducer\";\nimport Owners from \"./Owners/Owners\";\n\nclass Plates extends Component<ReduxPropsInterface> {\n  render() {\n    return (\n      <div>\n        <div className=\"mt-2 mr-2 ml-2\">\n          <Cars {...this.props}/>\n        </div>\n        <div className=\"mt-2 mr-2 ml-2\">\n          <Owners {...this.props} />\n        </div>\n      </div>\n    );\n  }\n}\n\n\nconst mapStateToProps = (state: any): any => {\n  return {};\n};\n\nexport default connect(mapStateToProps)(Plates);\n\n","import {Button, Card} from \"react-bootstrap\";\nimport React, {Component} from \"react\";\n\nclass PlateTraining extends Component<any, any> {\n\n  render() {\n    return (\n      <div>\n        <div className=\"magictime vanishIn\">\n          <Card bg=\"Light\" text=\"dark\">\n            <Card.Header>\n              <b>Plate training</b>\n            </Card.Header>\n            <Card.Body style={{padding: '5px'}}>\n              <small className=\"mb-4\">Plate training is only available as old jQuery version. Navigate there using\n                button below.</small>\n              <div className=\"mt-2\">\n                <Button\n                  variant=\"dark\"\n                  onClick={() => window.open(\"/plate-training.html\", \"_blank\")}\n                >\n                  Open plate training\n                </Button>\n              </div>\n            </Card.Body>\n          </Card>\n        </div>\n      </div>\n    )\n  }\n\n}\n\nexport default PlateTraining;\n","import React, {Component} from \"react\";\nimport {Button, Card, Col, Row} from \"react-bootstrap\";\nimport {\n  FaceGroupingData,\n  FaceGroupingImagesInterface, FaceGroupingNamesInterface,\n  getFaceGroupingImages, moveFaceGroupingImage, trainFaceModelAction,\n} from \"../../../utils/HttpUtils\";\nimport {LoadingIndicator} from \"../../../components/LoadingIndicator/LoadingIndicator\";\n\n\nclass PersonTraining extends Component<any, any> {\n  state = {\n    isLoading: true,\n    faceGroupingNames: [] as FaceGroupingNamesInterface[],\n    faceGroupingImages: [] as FaceGroupingImagesInterface[],\n    loadedFile: '',\n    showNames: false,\n  };\n\n  componentDidMount(): void {\n    this.loadFaceGroupingImages().then(() => null);\n  }\n\n  async loadFaceGroupingImages() {\n    const faceGroupingData = await getFaceGroupingImages() as FaceGroupingData;\n    this.setState({\n      isLoading: false,\n      faceGroupingNames: faceGroupingData.names,\n      faceGroupingImages: faceGroupingData.images,\n    });\n  }\n\n\n  render() {\n    let faceImages: JSX.Element[] = [];\n    let names: JSX.Element[] = [];\n\n    if (this.state.faceGroupingImages !== undefined) {\n      if (this.state.faceGroupingImages.length > 0) {\n        faceImages = this.state.faceGroupingImages.map(image => {\n          return (\n            <img\n              id={image.file}\n              title={image.title}\n              className=\"CursorPointer mr-1 ml-1 mt-1 magictime spaceInLeft\"\n              style={{maxHeight: '120px', maxWidth: '120px', width: 'auto', height: 'auto'}}\n              key={image.file}\n              src={image.image}\n              alt={image.file}\n              onClick={() => this.faceGroupingFaceImageClickHandler(image.file)}\n            />\n          )\n        });\n      }\n    }\n\n    if (this.state.faceGroupingNames.length > 0) {\n      names = this.state.faceGroupingNames.map(name => {\n        return (\n          <div key={String(name)}>\n            <Button onClick={async () => await this.moveFaceGroupingImageHandler(String(name))}\n                    variant=\"outline-secondary\"\n                    size=\"sm\" className=\"m-1\">\n              {name}\n            </Button>\n          </div>\n        )\n      });\n      names.push(\n        <div key=\"delete\">\n          <Button onClick={async () => await this.moveFaceGroupingImageHandler('delete')}\n                  variant=\"outline-danger\" size=\"sm\"\n                  className=\"m-1\">delete</Button>\n        </div>\n      )\n    }\n\n    return (\n      <div>\n        <div className=\"magictime vanishIn\">\n          <Card bg=\"Light\" text=\"dark\">\n            <Card.Header>\n              <b>Person grouping and training</b>\n            </Card.Header>\n            <Card.Body className=\"d-flex flex-column align-items-center\" style={{padding: '5px'}}>\n              <div className=\"d-flex flex-wrap mt-2 mb-2\">\n                {faceImages}\n              </div>\n              {\n                this.state.isLoading ? <LoadingIndicator isDark={true}/> : null\n              }\n              <small className=\"mb-1 text-muted\">\n                Click image and then select who is in the image. This is used for training.\n              </small>\n              <div className=\"d-flex flex-wrap mt-2 mb-4\">\n                {this.state.showNames ? names : null}\n              </div>\n\n              <Row>\n                <Col md=\"auto\">\n                  <Button onClick={async () => await this.trainModelHandler()} variant=\"secondary\" size=\"sm\">Train\n                    model</Button>\n                </Col>\n                <Col md=\"auto\">\n                  <Button onClick={() => this.loadMoreHandler()} variant=\"secondary\" size=\"sm\">Load more</Button>\n                </Col>\n                <Col md=\"auto\">\n                  <Button onClick={() => this.deleteAllVisibleHandler()} variant=\"danger\" size=\"sm\">Delete all\n                    visible</Button>\n                </Col>\n              </Row>\n\n            </Card.Body>\n          </Card>\n        </div>\n      </div>\n    )\n  }\n\n\n  faceGroupingFaceImageClickHandler = (file: string) => {\n    this.setState({\n      loadedFile: file,\n      showNames: true,\n    })\n  };\n\n  async moveFaceGroupingImageHandler(name: string) {\n    await moveFaceGroupingImage(name, this.state.loadedFile);\n    this.setState({\n      showNames: false,\n      faceGroupingImages: this.state.faceGroupingImages.filter((image: FaceGroupingImagesInterface) => {\n        return image.file !== this.state.loadedFile;\n      })\n    });\n  }\n\n  async trainModelHandler() {\n    // eslint-disable-next-line no-restricted-globals\n    if (confirm(\"Send train face model training action?\")) {\n      const response = await trainFaceModelAction();\n      // eslint-disable-next-line no-restricted-globals\n      alert(response);\n    }\n  }\n\n  loadMoreHandler = () => {\n    this.setState({\n      isLoading: true\n    });\n    this.loadFaceGroupingImages().then(() => null);\n  };\n\n  deleteAllVisibleHandler = () => {\n    // eslint-disable-next-line no-restricted-globals\n    if (confirm(\"Really delete all visible images?\")) {\n      this.state.faceGroupingImages.forEach((image: FaceGroupingImagesInterface) => {\n        moveFaceGroupingImage('delete', image.file).then(() => null);\n      });\n      this.setState({\n        faceGroupingImages: [] as FaceGroupingImagesInterface[]\n      });\n      this.loadFaceGroupingImages().then(() => null);\n    }\n  }\n\n}\n\nexport default PersonTraining;\n","import React, {Component} from \"react\";\nimport PlateTraining from \"./PlateTraining/PlateTraining\";\nimport PersonTraining from \"./PersonTraining/PersonTraining\";\n\nclass Training extends Component<any, any> {\n\n  componentDidMount(): void {\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"mt-2 mr-2 ml-2\">\n          <PlateTraining/>\n        </div>\n        <div className=\"mt-2 mr-2 ml-2\">\n          <PersonTraining/>\n        </div>\n      </div>\n    )\n  }\n}\n\n\nexport default Training;\n","import React, {Component} from 'react';\nimport './App.css';\nimport NavBar from \"./pages/Navbar/Navbar\";\nimport {Switch, Route} from \"react-router-dom\";\nimport styles from './pages/Cameras/Cameras.module.css';\nimport * as auth from './store/actions/auth';\nimport {connect} from \"react-redux\";\n\n// Pages\nimport Cameras from \"./pages/Cameras/Cameras\";\nimport Home from \"./pages/Home/Home\";\nimport Faces from \"./pages/Faces/Faces\";\nimport Plates from \"./pages/Plates/Plates\";\nimport Training from \"./pages/Training/Training\";\n\n\nclass App extends Component<any, any> {\n\n  componentDidMount() {\n    // this.props.onTryAutoSignup(); // Enabling some day when this app has authentication\n  }\n\n  render() {\n    let classes: string[] = [styles.Cameras];\n\n    let content =\n      this.props.isAuthenticated ?\n        <div>\n          <NavBar/>\n          <div className={classes.join(' ')} style={{paddingBottom: '80px'}}>\n            <Switch>\n              <Route exact path='/' component={Home}/>\n              <Route exact path='/cameras' component={Cameras}/>\n              <Route exact path='/plates' component={Plates}/>\n              <Route exact path='/faces' component={Faces}/>\n              <Route exact path='/training' component={Training}/>\n            </Switch>\n          </div>\n        </div>\n        :\n        <div className={classes.join(' ')}>\n          <h1 className=\"m-2\" style={{color: 'white'}}>Login not implemented</h1>\n          <small className=\"m-2\" style={{color: 'white'}}>You should not see this yet</small>\n        </div>\n\n    return (\n      <div className=\"App\">\n        {content}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: any) => {\n  return {\n    isAuthenticated: state.authReducer.token !== null\n  };\n};\n\nconst mapDispatchToProps = (dispatch: any) => {\n  return {\n    onTryAutoSignup: () => dispatch(auth.authCheckState())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import * as actionTypes from '../actionTypes';\nimport {ChangeDate, getNowISODate} from '../../utils/DateUtils';\n\nexport interface ReduxPropsInterface {\n  selectedDate: string;\n  onIncrementDay: () => void;\n  onDecrementDay: () => void;\n  onDateSelected: (event: string) => void;\n  dateRangeStartDate: string;\n  dateRangeEndDate: string;\n  onDateRangeStartDateSelected: (event: string) => void;\n  onDateRangeEndDateSelected: (event: string) => void\n}\n\nconst nowIsoDate = getNowISODate();\n\nexport interface DateStateInterface {\n  selectedDate: string;\n  dateRangeStartDate: string;\n  dateRangeEndDate: string;\n}\n\nexport interface DateActionInterface {\n  type: string;\n  selectedDate: string;\n  days: number;\n  calendar: {\n    target: {\n      value: string;\n    }\n  }\n}\n\nconst initialState = {\n  selectedDate: nowIsoDate,\n  dateRangeStartDate: ChangeDate(nowIsoDate, -7),\n  dateRangeEndDate: nowIsoDate,\n};\n\nconst dateReducer = (state: DateStateInterface = initialState, action: DateActionInterface): DateStateInterface => {\n  switch (action.type) {\n    case actionTypes.SET_SELECTED_DATE:\n      return {\n        ...state,\n        ...{selectedDate: action.selectedDate}\n      };\n    case actionTypes.INCREMENT_DAY:\n      return {\n        ...state,\n        ...{selectedDate: ChangeDate(state.selectedDate, action.days)}\n      };\n    case actionTypes.DECREMENT_DAY:\n      return {\n        ...state,\n        ...{selectedDate: ChangeDate(state.selectedDate, action.days)}\n      };\n    case actionTypes.CALENDAR_SELECTION:\n      return {\n        ...state,\n        ...{selectedDate: action.calendar.target.value}\n      };\n    case actionTypes.DATE_RANGE_START_DATE_SELECTED:\n      return {\n        ...state,\n        ...{dateRangeStartDate: action.calendar.target.value}\n      };\n    case actionTypes.DATE_RANGE_END_DATE_SELECTED:\n      return {\n        ...state,\n        ...{dateRangeEndDate: action.calendar.target.value}\n      };\n    default:\n      return state;\n  }\n};\n\nexport default dateReducer;\n","import {\n  AUTH_FAIL,\n  AUTH_LOGOUT,\n  AUTH_START,\n  AUTH_SUCCESS,\n  SET_AUTH_REDIRECT_PATH\n} from \"../actionTypes\";\n\n\nexport interface AuthStateInterface {\n  token: string | null;\n  userId: number | null;\n  error: string | null;\n  loading: boolean;\n  authRedirectPath: string;\n}\n\nexport interface AuthActionInterface {\n  type: string;\n  error: string;\n  idToken: string;\n  userId: number;\n  path: string;\n}\n\nconst initialState = {\n  token: 'dummy-place-holder', // token: null,\n  userId: null,\n  error: null,\n  loading: false,\n  authRedirectPath: '/'\n};\n\nconst authStart = (state: AuthStateInterface, action: AuthActionInterface) => {\n  return updateObject(state, {error: null, loading: true});\n};\n\nconst authSuccess = (state: AuthStateInterface, action: AuthActionInterface) => {\n  return updateObject(state, {\n    token: action.idToken,\n    userId: action.userId,\n    error: null,\n    loading: false\n  });\n};\n\nconst authFail = (state: AuthStateInterface, action: AuthActionInterface) => {\n  return updateObject(state, {\n    error: action.error,\n    loading: false\n  });\n};\n\nconst authLogout = (state: AuthStateInterface, action: AuthActionInterface) => {\n  return updateObject(state, {token: null, userId: null});\n};\n\nconst setAuthRedirectPath = (state: AuthStateInterface, action: AuthActionInterface) => {\n  return updateObject(state, {authRedirectPath: action.path})\n}\n\nconst reducer = (state: AuthStateInterface = initialState, action: AuthActionInterface) => {\n  switch (action.type) {\n    case AUTH_START:\n      return authStart(state, action);\n    case AUTH_SUCCESS:\n      return authSuccess(state, action);\n    case AUTH_FAIL:\n      return authFail(state, action);\n    case AUTH_LOGOUT:\n      return authLogout(state, action);\n    case SET_AUTH_REDIRECT_PATH:\n      return setAuthRedirectPath(state, action);\n    default:\n      return state;\n  }\n};\n\nconst updateObject = (oldObject: Object, updatedProperties: Object): Object => {\n  return {\n    ...oldObject,\n    ...updatedProperties\n  };\n};\n\nexport default reducer;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {BrowserRouter} from \"react-router-dom\";\nimport './Magic.css'\nimport {Provider} from 'react-redux'\nimport {createStore, combineReducers, applyMiddleware} from \"redux\";\nimport dateReducer from \"./store/reducers/dateReducer\";\nimport authReducer from \"./store/reducers/authReducer\";\nimport {composeWithDevTools} from 'redux-devtools-extension';\n// import thunk from 'redux-thunk'; // Todo, install thunk if needed (lets you write async logic that interacts with the store)\n\n\nconst rootReducer = combineReducers({\n  dateReducer: dateReducer,\n  authReducer: authReducer,\n  /* Add other reducers */\n});\n\nconst store = createStore(\n  rootReducer,\n  composeWithDevTools(\n    applyMiddleware(),\n    // other store enhancers here if any\n  )\n);\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <BrowserRouter>\n        <App/>\n      </BrowserRouter>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"NavbarBrand\":\"Navbar_NavbarBrand__331oC\",\"Link\":\"Navbar_Link__2xgcF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Cameras\":\"Cameras_Cameras__9f3Tt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SpinnerDiv\":\"LoadingIndicator_SpinnerDiv__NFW36\"};"],"sourceRoot":""}